@OYSTER_SCENE
#DIM DYNAMIC GRAVITYV
#DIM DYNAMIC LCOUNT

#DIM DYNAMIC BALL,14,2
#DIM DYNAMIC IDOL_A,14,2
#DIM DYNAMIC IDOL_B,14,2
;OYSTER.ERH 확인
#DIM DYNAMIC MLTV = 1 ; 좌우 이동 음수or양수 배수
#DIM DYNAMIC BOUNCEV = OY_DEFAULT_BOUNCEV ;충돌시 8로 초기화되는 바운스 높이 배수

GCREATEFROMFILE 0, @"oyster_dummy.png"
CALL OYSTER_SET_SPRITE(15,50)
IDOL_A:OY_IMAGE_NUM:0 = 1
IDOL_B:OY_IMAGE_NUM:0 = 9
IDOL_B:OY_COORD:0 = 500
BALL:OY_TARGET:0 = 0
BALL:OY_TARGET:1 = -200
CALL OYSTER_SET_BALL(200,-200,1,BALL)
DO
    CBGCLEAR
    ;화면 초기화

    ;볼 자유낙하 전환
    SIF BALL:OY_TIME:0 >= BALL:OY_DURATION:0 && BALL:OY_COORD:1 < 0
        BALL:OY_STATUS:0 = 2
    ;자유낙하 도중 추락처리
    IF BALL:OY_COORD:1 >= 0
        SELECTCASE BALL:OY_STATUS:0
            CASE 0
            CASE 1,2
                CALL OYSTER_SET_BALL(BALL:OY_COORD:0 + ((BALL:OY_DIRECTION:0)*(30*BOUNCEV)),BALL:OY_COORD:1,1,BALL)
                BALL:OY_STATUS:0 = 1
                BALL:OY_TARGET:0 = BALL:OY_COORD:0, 0
                ;바운스 배수 감소
                SIF BOUNCEV > 4
                    BOUNCEV --
                ;멈춤처리
                IF BOUNCEV == 4
                    BALL:OY_STATUS:0 = 0
                    BALL:OY_STATUS_NEXT:0 = 0
                ENDIF
            CASE 3
        ENDSELECT
    ENDIF

    ;볼 실제 이동
    CALL OYSTER_MOVE_BALL(BALL)
    CBGSETG 0,BALL:OY_COORD:0,BALL:OY_COORD:1,1
    CBGSETG IDOL_A:OY_IMAGE_NUM:0,IDOL_A:OY_COORD:0,IDOL_A:OY_COORD:1,1
    CBGSETG IDOL_B:OY_IMAGE_NUM:0,IDOL_B:OY_COORD:0,IDOL_B:OY_COORD:1,1
    TWAIT 1,1
LOOP 1