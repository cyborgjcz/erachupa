;
;D3D_SHOW_COMMAND
;유사3D 화면 밑에 커맨드 표시
;
@D3D_SHOW_COMMAND
#DIM DYNAMIC LCOUNT
#DIM DYNAMIC LCOUNT2
#DIM DYNAMIC LCOUNT3
#DIM DYNAMIC TOGREEN,3,2
#DIM DYNAMIC CURRENTCOLOR

[SKIPSTART]
;임시로 만들어두는 간이미니맵
SELECTCASE D3D_PLAYER_DIRECTION
    CASE 0
        TOGREEN:0:0 = -1,-1
        TOGREEN:1:0 = 0,-1
        TOGREEN:2:0 = 1,-1
    CASE 1
        TOGREEN:0:0 = 1,-1
        TOGREEN:1:0 = 1,0
        TOGREEN:2:0 = 1,1
    CASE 2
        TOGREEN:0:0 = -1,1
        TOGREEN:1:0 = 0,1
        TOGREEN:2:0 = 1,1
    CASE 3
        TOGREEN:0:0 = -1,-1
        TOGREEN:1:0 = -1,0
        TOGREEN:2:0 = -1,1
ENDSELECT
FOR LCOUNT2,0,D3D_CURRENT_MAPXSIZE
    FOR LCOUNT,0,D3D_CURRENT_MAPYSIZE
        FOR LCOUNT3,0,3
            IF LCOUNT == D3D_PLAYER_XCOORD + TOGREEN:LCOUNT3:0 && LCOUNT2 == D3D_PLAYER_YCOORD + TOGREEN:LCOUNT3:1
                IF D3D_CURRENT_MAPDATA:LCOUNT:LCOUNT2 == 1
                    SETCOLORBYNAME DarkGreen
                ELSE
                    SETCOLORBYNAME LightGreen
                ENDIF
            ENDIF
        NEXT
        GETCOLOR
        CURRENTCOLOR = RESULT:0
        GETDEFCOLOR
        SIF D3D_CURRENT_MAPDATA:LCOUNT:LCOUNT2 == 1 && CURRENTCOLOR == RESULT:0
            SETCOLORBYNAME DimGray

        SIF LCOUNT == D3D_PLAYER_XCOORD && LCOUNT2 == D3D_PLAYER_YCOORD
            SETCOLORBYNAME Blue
        IF D3D_CURRENT_MAPDATA:LCOUNT:LCOUNT2 == 0
            PRINT ■
        ELSEIF D3D_CURRENT_MAPDATA:LCOUNT:LCOUNT2 == 1
            PRINT □
        ENDIF
        RESETCOLOR
    NEXT
    IF LCOUNT2 == D3D_CURRENT_MAPXSIZE-1
        PRINTFORML 플레이어 좌표={D3D_PLAYER_XCOORD},{D3D_PLAYER_YCOORD} 플레이어방향={D3D_PLAYER_DIRECTION}
    ELSE
        PRINTL
    ENDIF
NEXT
[SKIPEND]

PRINTBUTTON "［ｑ］←","q"
PRINTBUTTON "［ｗ］↑","q"
PRINTBUTTON "［ｅ］→","q"
PRINTL
PRINTBUTTON "［ａ］↶","q"
PRINT_SPACE 410
PRINTBUTTON "［ｄ］↷","q"
PRINTL
PRINT_SPACE 400
PRINTBUTTON "［ｓ］↓","q"
;
;D3D_SHOW_COMMAND
;커맨드 표시
;
@D3D_INPUT_COMMAND
ONEINPUTS
SELECTCASE RESULTS
    CASE "s"
        CALL D3D_MOVE_PLAYER(2)
    CASE "e"
        CALL D3D_MOVE_PLAYER(1)
    CASE "q"
        CALL D3D_MOVE_PLAYER(3)
    CASE "a"
        CALL D3D_CHANGE_DIRECTION(-1)
        RETURN 0
    CASE "w"
        CALL D3D_MOVE_PLAYER(0)
    CASE "d"
        CALL D3D_CHANGE_DIRECTION(1)
        RETURN 0
    CASEELSE
        CLEARLINE 1
        REUSELASTLINE
        RESTART
ENDSELECT
IF !RESULT
    RETURN 0
ELSE
    RETURN 1
ENDIF