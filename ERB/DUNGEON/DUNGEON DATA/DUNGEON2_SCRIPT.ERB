@DUNGEON2_INIT_EVENT
IF DUNGEON2_FLAG:0 == 0
    ;첫입장
ENDIF

;던전 특정 위치에 맵 이동 시 자동발생하는 이벤트
@DUNGEON2_AUTO_EVENT(XCOORD=-1,YCOORD=-1)
#DIM DYNAMIC XCOORD
#DIM DYNAMIC YCOORD
SIF XCOORD < 0 || XCOORD >= D3D_CURRENT_MAPXSIZE
    XCOORD = D3D_PLAYER_XCOORD
SIF YCOORD < 0 || YCOORD >= D3D_CURRENT_MAPYSIZE
    YCOORD = D3D_PLAYER_YCOORD

CALL D3D_SHOW_GRAPHIC
CALL D3D_SHOW_COMMAND

IF DUNGEON_IN_FIELD(4,,17,,XCOORD,YCOORD)
    IF !DUNGEON2_FLAG:1
        TRYCALL DUNGEON2_AUTO1_EVENT
        DUNGEON2_FLAG:1 = 1
    ENDIF
ELSEIF DUNGEON_IN_FIELD(2,,13,,XCOORD,YCOORD)
    IF !DUNGEON2_FLAG:2
        TRYCALL DUNGEON2_AUTO2_EVENT
        DUNGEON2_FLAG:2 = 1
    ENDIF
ELSEIF DUNGEON_IN_FIELD(2,,7,,XCOORD,YCOORD)
    IF !DUNGEON2_FLAG:3
        TRYCALL DUNGEON2_AUTO3_EVENT
        DUNGEON2_FLAG:3 = 1
    ENDIF
ELSEIF DUNGEON_IN_FIELD(9,,4,,XCOORD,YCOORD)
    IF !DUNGEON2_FLAG:4
        TRYCALL DUNGEON2_AUTO4_EVENT
        DUNGEON2_FLAG:4 = 1
    ENDIF
ELSEIF DUNGEON_IN_FIELD(14,,14,,XCOORD,YCOORD)
    IF !DUNGEON2_FLAG:5
        TRYCALL DUNGEON2_AUTO5_EVENT
        DUNGEON2_FLAG:5 = 1
    ENDIF
{
    ELSEIF (!DUNGEON_IN_FIELD(13,17,3,5,XCOORD,YCOORD) && !DUNGEON_IN_FIELD(13,,6,,XCOORD,YCOORD)) &&
    (!DUNGEON_IN_FIELD(1,6,13,,XCOORD,YCOORD) && !DUNGEON_IN_FIELD(6,,13,15,XCOORD,YCOORD))
}
    ;퍼즐 2종류의 초기화 및 출력 초기화
    DUNGEON_TIMER_ACTIVATE = 0
    DUNGEON_TIMER = 0
    DUNGEON2_PUZZLE1_SCORE = 0
    DUNGEON2_PUZZLE1_COUNTER1 = 0
    DUNGEON2_PUZZLE1_COUNTER2 = 0
    DUNGEON2_PUZZLE1_COUNTER3 = 0
    DUNGEON_EXTRA_TEXT '= ""
    DUNGEON2_PUZZLE2_COUNTER = 0,2,1,0,2
ENDIF