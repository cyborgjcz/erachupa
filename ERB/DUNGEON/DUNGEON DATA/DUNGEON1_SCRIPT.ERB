@DUNGEON1_INIT_EVENT
IF !(DUNGEON1_FLAG:1)
    ;첫입장
    ;D3D 셀프디스
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_1_K{FLAG:2}")
    ;동료를 찾아야한다
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_2_K{FLAG:1}")
    ;눈 앞의 대로
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_3_K{FLAG:2}")
    ;긍정
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_4_K{FLAG:1}")
    ;...
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_5_K{FLAG:2}")
    ;걱정
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_6_K{FLAG:1}")
    ;배가 고픔
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_7_K{FLAG:2}")
    ;대꾸
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_8_K{FLAG:1}")
    DUNGEON1_FLAG:1 = 1
ENDIF

;던전 특정 위치에 맵 이동 시 자동발생하는 이벤트
@DUNGEON1_AUTO_EVENT(XCOORD=-1,YCOORD=-1)
#DIM DYNAMIC XCOORD
#DIM DYNAMIC YCOORD
SIF XCOORD < 0 || XCOORD >= D3D_CURRENT_MAPXSIZE
    XCOORD = D3D_PLAYER_XCOORD
SIF YCOORD < 0 || YCOORD >= D3D_CURRENT_MAPYSIZE
    YCOORD = D3D_PLAYER_YCOORD

CALL D3D_SHOW_GRAPHIC
CALL D3D_SHOW_COMMAND

{
    IF ((XCOORD == 8 && YCOORD == 8) || (XCOORD == 9 && YCOORD == 8) ||
    (XCOORD == 9 && YCOORD == 7)) && DUNGEON1_SWITCH:3 == 0
}
    TRYCALL DUNGEON1_AUTO1_EVENT
    DUNGEON1_SWITCH:3 = 1
ELSEIF (XCOORD == 13 && YCOORD == 2) && DUNGEON1_SWITCH:4 == 0
    TRYCALL DUNGEON1_AUTO2_EVENT
    DUNGEON1_SWITCH:4 = 1
ELSEIF (XCOORD == 9 && YCOORD == 1)
    TRYCALL DUNGEON1_AUTO3_EVENT
ENDIF

@DUNGEON1_AUTO1_EVENT
;느낌표 언급
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_1_K{FLAG:1}")
;느낌표 모양 통신장치에 대해
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_2_K{FLAG:2}")
;??
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_3_K{FLAG:1}")
;z버튼 언급
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_4_K{FLAG:2}")
;???
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_5_K{FLAG:1}")
;마이페이스 렛츠고
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_6_K{FLAG:2}")
;????
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_7_K{FLAG:1}")


@DUNGEON1_AUTO2_EVENT
PRINTL DUNGEON1_AUTO2_EVENT 미실장
WAITANYKEY

@DUNGEON1_AUTO3_EVENT
PRINTL DUNGEON1_AUTO3_EVENT 미실장
WAITANYKEY

@DUNGEON1_INTERACT1_EVENT
;버튼을 누름
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_START_K{FLAG:1}")
SELECTCASE DUNGEON1_FLAG:0
    CASE [[타카네]]
        IF ISHERO([[미키]])
            ;타카네의 첫 반응
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_ALTER_EX1_K{[[타카네]]}")
        ELSE
            ;연락을 수신함
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX1_K{[[미키]]}")
            ;미키의 이름을 부름
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_2_K{FLAG:2}")
            ;(타카네)에게 말을 검
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX3_K{[[미키]]}")
            ;기뻐하는 반응
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX4_K{[[타카네]]}")
            ;대화 상대 교환
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX5_K{[[미키]]}")
            ;미키에 대해
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_6_K{FLAG:1}")
        ENDIF
        ;지원군이 왔어
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_7_K{FLAG:2}")
        ;나도 있어
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_8_K{FLAG:1}")
        ;반가워하는 타카네
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX9_K{[[타카네]]}")
        ;걱정
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_10_K{FLAG:2}")
        ;인사
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX11_K{[[타카네]]}")
        SIF !ISHERO([[이오리]]);늦어
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX12_K{[[이오리]]}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_13_K{FLAG:1}")
        ;타카네의 상황 설명...
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX14_K{[[타카네]]}")
        ;위치를 묻는 
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_15_K{FLAG:2}")
        ;바로 앞이라 답하는
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX16_K{[[타카네]]}")
        ;열수없느냐고 묻는
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_17_K{FLAG:1}")
        ;ㅇㅇ...
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX18_K{[[타카네]]}")
        IF ISHERO([[이오리]])
            IF ISHERO([[히비키]])
                DUNGEON1_FLAG:4 = [[마미]]
            ELSE
                DUNGEON1_FLAG:4 = [[히비키]]
            ENDIF
        ELSE
            DUNGEON1_FLAG:4 = [[이오리]]
        ENDIF
        ;설명타임
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX19_K{DUNGEON1_FLAG:4}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_20_K{FLAG:2}")
        ;장문 설명
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX21_K{DUNGEON1_FLAG:4}")
        PRINTL [0] 예
        PRINTL [1] 아니오
        INPUT
        IF RESULT == 1
            DO
                CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX22_K{DUNGEON1_FLAG:4}");다시설명
                PRINTL [0] 예
                PRINTL [1] 아니오
                INPUT
                SIF !RESULT
                    BREAK
            LOOP 1
        ENDIF
        ;이해함
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_23_K{FLAG:1}")
        ;바로실행하자
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_24_K{FLAG:2}")
        ;이것을 누르면 되는지
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX25_K{[[타카네]]}")
        SIF !ISHERO([[이오리]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX26_K{[[이오리]]}")
        ;에잇
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX27_K{[[타카네]]}")
        ;크흑... 귀여워
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_28_K{FLAG:2}")
        ;그럼 다녀와
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX29_K{DUNGEON1_FLAG:4}")
        ;예썰
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_30_K{FLAG:1}")
    CASE [[마코토]]
        ;미작성
    CASE [[아즈사]]
        ;미작성
ENDSELECT
DUNGEON1_SWITCH:1 = 1

@DUNGEON1_INTERACT2_EVENT
PRINTL DUNGEON1_INTERACT2_EVENT 미실장
WAITANYKEY

@DUNGEON1_INTERACT3_EVENT
PRINTL DUNGEON1_INTERACT3_EVENT 미실장
WAITANYKEY

@DUNGEON1_INTERACT4_EVENT
PRINTL DUNGEON1_INTERACT4_EVENT 미실장
WAITANYKEY

@DUNGEON1_INTERACT5_EVENT
PRINTL DUNGEON1_INTERACT5_EVENT 미실장
WAITANYKEY

@DUNGEON1_EXIT_EVENT
;1층 클리어 시 퇴장할 때 메시지 출력
PRINTFORML %조사처리(CALLNAME:[[FLAG:1]],"와")% %조사처리(CALLNAME:[[FLAG:2]],"는")% 극장으로 돌아왔다.

@DUNGEON1_DOOR1_CLOSED_EVENT
IF DUNGEON1_SWITCH:2
    ;문이 열리지 않음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_3_1_K{FLAG:2}")
    ;어딘가 놓친 것
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_3_2_K{FLAG:1}")
    ;방법을 찾아야 함
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_3_3_K{FLAG:2}")
ELSEIF DUNGEON1_SWITCH:1
    ;동료들을 위해 서둘러야 함
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_1_K{FLAG:1}")
    ;조급해할 것 없음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_2_K{FLAG:2}")
    ;그렇구나
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_3_K{FLAG:1}")
    ;릴랙스
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_4_K{FLAG:2}")
    ;알겠음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_5_K{FLAG:1}")
ELSE
    ;닫힌 문불평
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_1_1_K{FLAG:2}")
    ;맞장구
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_1_2_K{FLAG:1}")
    ;동의
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_1_3_K{FLAG:2}")
ENDIF

@DUNGEON1_DOOR1_OPEN_EVENT
;문 열기
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_1_K{FLAG:1}")
PRINTL 무거운 진동음과 함께 대로를 막아선 문이 열리기 시작했다.
WAITANYKEY
PRINTL ......
WAITANYKEY
PRINTL ...
WAITANYKEY
;기쁨 표현
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_2_K{FLAG:2}")
;모두가 기다린다
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_3_K{FLAG:1}")
;동의함
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_4_K{FLAG:2}")


@DUNGEON1_DOOR2_CLOSED_EVENT
;커다란 문
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_1_K{FLAG:1}")
;힘으론 문을 열기 힘들것
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_2_K{FLAG:2}")
;중장비
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_3_K{FLAG:1}")
;운전자 안전 X
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_4_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_5_K{FLAG:1}")

@DUNGEON1_DOOR2_OPEN_EVENT
;도착
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_1_K{FLAG:2}")
;버튼이 있음
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_2_K{FLAG:1}")
;누르기
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_3_K{FLAG:2}")
;문이 열렸구나
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_4_K{FLAG:1}")
;앞은 위험할지도 모르니 조심
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_5_K{FLAG:2}")
;동의
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_6_K{FLAG:1}")

@DUNGEON1_DOOR3_CLOSED_EVENT
;던전 첫 방문 시 단서없음
IF DUNGEON1_SWITCH:1
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_3_1_K{FLAG:1}")
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_3_2_K{FLAG:2}")
ELSEIF DUNGEON1_SWITCH:3
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_2_1_K{FLAG:1}")
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_2_2_K{FLAG:2}")
ELSE
    ;문이 열리지 않음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_1_K{FLAG:1}")
    ;다른 길을 모색
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_2_K{FLAG:2}")
    ;기다려달라
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_3_K{FLAG:1}")
    ;?
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_4_K{FLAG:2}")
    ;악기 소리 언급
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_5_K{FLAG:1}")
    ;확인
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_6_K{FLAG:2}")
ENDIF

@DUNGEON1_DOOR3_OPEN_EVENT
;도착함
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_1_K{FLAG:1}")
;앞에 누군가 있을지 의문
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_2_K{FLAG:2}")
;소망사항
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_3_K{FLAG:1}")
;잘 아는 사람일수도 잘 모르는 사람일수도
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_4_K{FLAG:2}")