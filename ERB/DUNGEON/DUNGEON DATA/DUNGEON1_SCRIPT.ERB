@DUNGEON1_INIT_EVENT
IF DUNGEON1_FLAG:1 == 0
    ;첫입장
    ;D3D 셀프디스
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_1_K{FLAG:2}")
    ;동료를 찾아야한다
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_2_K{FLAG:1}")
    ;눈 앞의 대로
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_3_K{FLAG:2}")
    ;긍정
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_4_K{FLAG:1}")
    ;...
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_5_K{FLAG:2}")
    ;걱정
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_6_K{FLAG:1}")
    ;배가 고픔
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_7_K{FLAG:2}")
    ;대꾸
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INIT_EVENT_8_K{FLAG:1}")
    DUNGEON1_FLAG:1 = 1
ENDIF

;던전 특정 위치에 맵 이동 시 자동발생하는 이벤트
@DUNGEON1_AUTO_EVENT(XCOORD=-1,YCOORD=-1)
#DIM DYNAMIC XCOORD
#DIM DYNAMIC YCOORD
SIF XCOORD < 0 || XCOORD >= D3D_CURRENT_MAPXSIZE
    XCOORD = D3D_PLAYER_XCOORD
SIF YCOORD < 0 || YCOORD >= D3D_CURRENT_MAPYSIZE
    YCOORD = D3D_PLAYER_YCOORD

CALL D3D_SHOW_GRAPHIC
CALL D3D_SHOW_COMMAND

{
    IF ((XCOORD == 8 && YCOORD == 8) || (XCOORD == 9 && YCOORD == 8) ||
    (XCOORD == 9 && YCOORD == 7)) && DUNGEON1_SWITCH:3 == 0
}
    TRYCALL DUNGEON1_AUTO1_EVENT
    DUNGEON1_SWITCH:3 = 1
ELSEIF (XCOORD == 13 && YCOORD == 2) && DUNGEON1_SWITCH:4 == 0
    TRYCALL DUNGEON1_AUTO2_EVENT
    DUNGEON1_SWITCH:4 = 1
ELSEIF (XCOORD == 9 && YCOORD == 1)
    TRYCALL DUNGEON1_AUTO3_EVENT
ENDIF

@DUNGEON1_AUTO1_EVENT
;느낌표 언급
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_1_K{FLAG:1}")
;느낌표 모양 통신장치에 대해
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_2_K{FLAG:2}")
;??
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_3_K{FLAG:1}")
;z버튼 언급
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_4_K{FLAG:2}")
;???
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_5_K{FLAG:1}")
;마이페이스 렛츠고
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_6_K{FLAG:2}")
;????
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DUNGEON1_AUTO1_EVENT_7_K{FLAG:1}")


@DUNGEON1_AUTO2_EVENT
IF DUNGEON1_SWITCH:5
    ;광선총 있음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_9_K{FLAG:2}")
    D3D_PLAYER_DIRECTION = 1
    D3D_BSW:1:16:2 = 1
    CALL D3D_SHOW_GRAPHIC
    ;빔 건으로 맞춰보자
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_10_K{FLAG:2}")
    ;맞추지 못할 거리는 아님
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_11_K{FLAG:1}")
    ;괜찮을것이다
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_12_K{FLAG:2}")
    ;한번 해보자
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_13_K{FLAG:1}")
ELSE
    ;광선총 없음
    ;저게 뭐지
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_1_K{FLAG:1}")
    D3D_BSW:1:16:2 = 1
    CALL D3D_SHOW_GRAPHIC
    ;벽 확인
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_2_K{FLAG:2}")
    ;바로 앞 칸 확인
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_3_K{FLAG:1}")
    ;급할수록 돌아가라
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_4_K{FLAG:2}")
    ;?
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_5_K{FLAG:1}")
    ;그러니까 돌아가자
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_6_K{FLAG:2}")
    ;??-화냄
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_7_K{FLAG:1}")
    ;웃음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO2_EVENT_8_K{FLAG:2}")
ENDIF

@DUNGEON1_AUTO3_EVENT
;(타카네) 일행이 무사히 복귀했는지 확인이 먼저
CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO3_EVENT_1_K{FLAG:1}")
;알았다
CALL KOJO_CATCH(@"KOJO_DUNGEON1_AUTO3_EVENT_2_K{FLAG:2}")

@DUNGEON1_INTERACT1_EVENT
;버튼을 누름
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_START_K{FLAG:1}")
SELECTCASE DUNGEON1_FLAG:0
    CASE [[타카네]]
        IF ISHERO([[미키]])
            ;타카네의 첫 반응
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_ALTER_EX1_K{[[타카네]]}")
        ELSE
            ;연락을 수신함
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX1_K{[[미키]]}")
            ;미키의 이름을 부름
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_2_K{FLAG:2}")
            ;(타카네)에게 말을 검
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX3_K{[[미키]]}")
            ;기뻐하는 반응
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX4_K{[[타카네]]}")
            ;대화 상대 교환
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX5_K{[[미키]]}")
            ;미키에 대해
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_6_K{FLAG:1}")
        ENDIF
        ;지원군이 왔어
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_7_K{FLAG:2}")
        ;나도 있어
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_8_K{FLAG:1}")
        ;반가워하는 타카네
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX9_K{[[타카네]]}")
        ;걱정
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_10_K{FLAG:2}")
        ;인사
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX11_K{[[타카네]]}")
        SIF !ISHERO([[이오리]]);늦어
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX12_K{[[이오리]]}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_13_K{FLAG:1}")
        ;타카네의 상황 설명...
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX14_K{[[타카네]]}")
        ;위치를 묻는 
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_15_K{FLAG:2}")
        ;바로 앞이라 답하는
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX16_K{[[타카네]]}")
        ;열수없느냐고 묻는
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_17_K{FLAG:1}")
        ;ㅇㅇ...
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX18_K{[[타카네]]}")
        IF ISHERO([[이오리]])
            IF ISHERO([[히비키]])
                DUNGEON1_FLAG:4 = [[마미]]
            ELSE
                DUNGEON1_FLAG:4 = [[히비키]]
            ENDIF
        ELSE
            DUNGEON1_FLAG:4 = [[이오리]]
        ENDIF
        ;설명타임
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX19_K{DUNGEON1_FLAG:4}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_20_K{FLAG:2}")
        ;장문 설명
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX21_K{DUNGEON1_FLAG:4}")
        PRINTL [0] 예
        PRINTL [1] 아니오
        INPUT
        IF RESULT == 1
            DO
                CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX22_K{DUNGEON1_FLAG:4}");다시설명
                PRINTL [0] 예
                PRINTL [1] 아니오
                INPUT
                SIF !RESULT
                    BREAK
            LOOP 1
        ENDIF
        ;이해함
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_23_K{FLAG:1}")
        ;바로실행하자
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_24_K{FLAG:2}")
        ;이것을 누르면 되는지
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX25_K{[[타카네]]}")
        SIF !ISHERO([[이오리]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX26_K{[[이오리]]}")
        ;에잇
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX27_K{[[타카네]]}")
        ;크흑... 귀여워
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_28_K{FLAG:2}")
        ;그럼 다녀와
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_EX29_K{DUNGEON1_FLAG:4}")
        ;예썰
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT1_EVENT_T_30_K{FLAG:1}")
    CASE [[마코토]]
        ;미작성
    CASE [[아즈사]]
        ;미작성
ENDSELECT

@DUNGEON1_INTERACT2_EVENT
#DIM DYNAMIC NEKOV
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_P_1_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_P_2_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_P_3_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_P_4_K{FLAG:2}")
PRINTL 그때 웅성거리는 소음이 들린다.
WAITANYKEY
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_P_5_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_P_6_K{FLAG:1}")
DUNGEON1_TEMPV = 0
PRINTL [0] 비닐봉투 속에 숨는다
PRINTL [1] 고양이 뒤에 숨는다
PRINTL [2] 선제 공격한다
DO
    INPUT
    SELECTCASE RESULT
        CASE 0
            PRINTL 두 사람이 숨기에 비닐봉투는 너무 작았다.
            WAITANYKEY
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_0_1_K{FLAG:2}")
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_0_2_K{FLAG:1}")
            BREAK
        CASE 1
            DUNGEON1_TEMPV = 1
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_1_1_K{FLAG:1}")
            PRINTL 두 사람이 숨기에 고양이는 너무 작았다.
            WAITANYKEY
            BREAK
        CASE 2
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_2_1_K{FLAG:2}")
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_2_2_K{FLAG:1}")
            BREAK
    ENDSELECT
LOOP 1
@DUNGEON1_INTERACT2_EVENT_AFTER
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_A_1_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_A_2_K{FLAG:1}")
IF !DUNGEON1_TEMPV
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_A_3_K{FLAG:2}")
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_A_4_K{FLAG:1}")
ELSE
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_A_N_1_K{FLAG:2}")
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT2_EVENT_A_N_2_K{FLAG:1}")
ENDIF
PRINTFORML %조사처리(CALLNAME:(FLAG:1),"와")% %조사처리(CALLNAME:(FLAG:2),"은")% 너덜너덜해진 비닐봉투를 뒤로 했다.

@DUNGEON1_INTERACT3_EVENT
DUNGEON1_TEMPV = 0
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_START_1_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_START_2_K{FLAG:1}")
SELECTCASE DUNGEON1_FLAG:0
    CASE [[타카네]]
        IF ISHERO([[유키호]])
            IF ISHERO([[마미]])
                DUNGEON1_FLAG:5 = [[히비키]]
            ELSE
                DUNGEON1_FLAG:5 = [[마미]]
            ENDIF
        ELSE
            DUNGEON1_FLAG:5 = [[유키호]]
        ENDIF
        IF !ISHERO([[미키]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX1_K{[[미키]]}")
            DUNGEON1_TEMPV = 1;미키가 조연으로 등장해서 바톤을 넘겼는지 여부.
        ENDIF
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX2_K{DUNGEON1_FLAG:5}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_3_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_4_K{FLAG:2}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX5_K{DUNGEON1_FLAG:5}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_6_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX7_K{DUNGEON1_FLAG:5}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_8_K{FLAG:2}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX9_K{DUNGEON1_FLAG:5}")
        ;포칫
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_10_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_11_K{FLAG:2}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX12_K{DUNGEON1_FLAG:5}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_13_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX14_K{DUNGEON1_FLAG:5}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_15_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX16_K{DUNGEON1_FLAG:5}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_17_K{FLAG:2}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_18_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT3_EVENT_T_EX19_K{DUNGEON1_FLAG:5}")
    CASE [[마코토]]
        ;미작성
    CASE [[아즈사]]
        ;미작성
ENDSELECT

@DUNGEON1_INTERACT4_EVENT
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_1_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_2_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX3_K101")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_4_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX5_K102")
;FLAG:2를 아느냐
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_6_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX7_K102")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX8_K101")
PRINTL 수수께끼의 소녀들은 서로 귓속말을 나눴다.
WAITANYKEY
PRINTL ......
WAITANYKEY
PRINTL ...
WAITANYKEY
;헛기침
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX9_K102")
;매지션 자기 소개
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_10_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX11_K101")
;나이트 자기 소개
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX12_K102")
;전혀 그렇게 보이지 않음
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_13_K{FLAG:2}")
;자기소개, 츄파카브라가 돌아다녀서 위험하다
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_14_K{FLAG:1}")
;문제없음
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX15_K102")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_16_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX17_K101")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_18_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_19_K{FLAG:2}")
PRINTL 츄파 매지션은 고개를 끄덕였다.
WAITANYKEY
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX20_K101")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_21_K{FLAG:1}")
;철수하는 츄파
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX22_K101")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX23_K102")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_EX24_K101")
PRINTL 두 츄파카브라(?)는 부리나케 그 자리를 떠났다.
WAITANYKEY
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_25_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_26_K{FLAG:1}")
PRINTL ......
WAITANYKEY
PRINTL ...
WAITANYKEY
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_27_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_28_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_29_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT4_EVENT_30_K{FLAG:1}")

@DUNGEON1_INTERACT5_EVENT
#DIM DYNAMIC LCOUNT
SELECTCASE DUNGEON1_FLAG:0
    CASE [[타카네]]
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EX1_K{[[타카네]]}")
        DUNGEON1_TEMPV = 0;발화자 TEMPS는 발화주제
        DUNGEON1_TEMPS '= ""
        IF !ISHERO([[마미]])
            ;여기서 마미가 장난치거나 이상한 별명 등의 대사에 FLAG:2 캐릭터가 반응.
            ;마미가 주연이라 대사를 하지 않는 경우 물론 반응하지 않음
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EX2_K{[[마미]]}")
        ENDIF
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_3_K{FLAG:2}}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_4_K{FLAG:1}}")
        DUNGEON1_TEMPV = 0;발화자 TEMPS는 발화주제
        DUNGEON1_TEMPS '= ""
        SIF !ISHERO([[유키호]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX5_K{[[유키호]]}")
        ;유키호의 구상에서 입력된 TEMP 값은 EX6 히비키 대사에서 이용함
        IF ISHERO([[이오리]]) && ISHERO([[히비키]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX7_K{[[타카네]]}")
        ELSEIF ISHERO([[이오리]]) && !ISHERO([[히비키]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX7_K{[[히비키]]}")
        ELSEIF ISHERO([[히비키]]) && !ISHERO([[이오리]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX7_K{[[이오리]]}")
        ELSE
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX6_K{[[히비키]]}")
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX7_K{[[이오리]]}")
        ENDIF
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_8_K{FLAG:1}}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_9_K{FLAG:2}}")
        DUNGEON1_TEMPV = 0;발화자 TEMPS는 발화주제
        DUNGEON1_TEMPS '= ""
        IF !ISHERO([[마미]])
            ;마찬가지로.
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EX10_K{[[마미]]}")
            CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_11_K{FLAG:2}")
        ENDIF
        ;타카네의 대사도 TEMP에 영향을 받는다.
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EX12_K{[[타카네]]}")
        SIF !ISHERO([[유키호]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX13_K{[[유키호]]}")
        SIF !ISHERO([[이오리]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX14_K{[[이오리]]}")
        SIF !ISHERO([[히비키]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX15_K{[[히비키]]}")
        SIF !ISHERO([[미키]])
            CALL KOJO_CATCH(@"KOJO_DUNGEON_INTERACT5_EVENT_T_EX16_K{[[미키]]}")
        PRINTL ......
        WAITANYKEY
        PRINTL ...
        WAITANYKEY
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EQ_EX1_K{[[타카네]]}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EQ_2_K{FLAG:1}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EQ_EX3_K{[[타카네]]}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_EQ_4_K{FLAG:1}")
        PRINTL 비살상 빔 건을 얻었다.
        WAITANYKEY
        PRINTL 타카네를 비롯한 선발조 2팀 멤버들은 복귀했다.
        WAITANYKEY
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_ED_1_K{FLAG:2}")
        CALL KOJO_CATCH(@"KOJO_DUNGEON1_INTERACT5_EVENT_T_ED_2_K{FLAG:1}")
    CASE [[마코토]]
        ;미작성
    CASE [[아즈사]]
        ;미작성
ENDSELECT

@DUNGEON1_RANGE1_EVENT
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_1_K{FLAG:1}")
@DUNGEON1_RANGE1_EVENT_AFTER
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_2_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_3_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_4_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_5_K{FLAG:1}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_6_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_RANGE1_EVENT_7_K{FLAG:1}")

@DUNGEON1_TREASURE1_EVENT
;장비아이템 획득
;반짝거리는 물건
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE1_EVENT_1_K{FLAG:2}")
;따뜻한 기운
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE1_EVENT_2_K{FLAG:1}")
;해롭지 않은 느낌, 챙기자
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE1_EVENT_3_K{FLAG:2}")
;챙긴다
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE1_EVENT_4_K{FLAG:1}")
@DUNGEON1_TREASURE2_EVENT
;스파크 드링크
;프로듀서가 자주 마시던 것
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE2_EVENT_1_K{FLAG:1}")
;본 적 있음
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE2_EVENT_2_K{FLAG:2}")
;맛
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE2_EVENT_3_K{FLAG:1}")
;우리가 사용하자
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE2_EVENT_4_K{FLAG:2}")
@DUNGEON1_TREASURE3_EVENT
;소재가 될 만한 것
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE3_EVENT_1_K{FLAG:2}")
;겉보기에 보통 천
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE3_EVENT_2_K{FLAG:1}")
;특별한 소재일것
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE3_EVENT_3_K{FLAG:2}")
;미사키에게 전달
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE3_EVENT_4_K{FLAG:1}")
;의상에 대해 부끄러워함
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE3_EVENT_5_K{FLAG:2}")
;반응
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE3_EVENT_6_K{FLAG:1}")
@DUNGEON1_TREASURE4_EVENT
;붉은체크무늬원단(프롤로그루주 소재)
;놀람
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE4_EVENT_1_K{FLAG:1}")
;낯익은 색 과거회상
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE4_EVENT_2_K{FLAG:2}")
;그때는 힘들었지만 좋은 추억/원천
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE4_EVENT_3_K{FLAG:1}")
;미사키에게 가져다주자
CALL KOJO_CATCH(@"KOJO_DUNGEON1_TREASURE4_EVENT_4_K{FLAG:2}")

@DUNGEON1_EXIT_EVENT
;1층 클리어 시 퇴장할 때 메시지 출력
;HERE
PRINTFORML %조사처리(CALLNAME:(FLAG:1),"와")% %조사처리(CALLNAME:(FLAG:2),"는")% 극장으로 돌아왔다.

@DUNGEON1_DOOR1_CLOSED_EVENT
IF DUNGEON1_SWITCH:2
    ;문이 열리지 않음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_3_1_K{FLAG:2}")
    ;어딘가 놓친 것
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_3_2_K{FLAG:1}")
    ;방법을 찾아야 함
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_3_3_K{FLAG:2}")
ELSEIF DUNGEON1_SWITCH:1
    ;동료들을 위해 서둘러야 함
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_1_K{FLAG:1}")
    ;조급해할 것 없음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_2_K{FLAG:2}")
    ;그렇구나
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_3_K{FLAG:1}")
    ;릴랙스
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_4_K{FLAG:2}")
    ;알겠음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_2_5_K{FLAG:1}")
ELSE
    ;닫힌 문불평
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_1_1_K{FLAG:2}")
    ;맞장구
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_1_2_K{FLAG:1}")
    ;동의
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_CLOSED_EVENT_1_3_K{FLAG:2}")
ENDIF

@DUNGEON1_DOOR1_OPEN_EVENT
;문 열기
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_1_K{FLAG:1}")
PRINTL 무거운 진동음과 함께 대로를 막아선 문이 열리기 시작했다.
WAITANYKEY
PRINTL ......
WAITANYKEY
PRINTL ...
WAITANYKEY
;기쁨 표현
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_2_K{FLAG:2}")
;모두가 기다린다
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_3_K{FLAG:1}")
;동의함
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR1_OPEN_EVENT_4_K{FLAG:2}")


@DUNGEON1_DOOR2_CLOSED_EVENT
;커다란 문
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_1_K{FLAG:1}")
;힘으론 문을 열기 힘들것
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_2_K{FLAG:2}")
;중장비
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_3_K{FLAG:1}")
;운전자 안전 X
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_4_K{FLAG:2}")
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_CLOSED_EVENT_5_K{FLAG:1}")

@DUNGEON1_DOOR2_OPEN_EVENT
;도착
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_1_K{FLAG:2}")
;버튼이 있음
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_2_K{FLAG:1}")
;누르기
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_3_K{FLAG:2}")
;문이 열렸구나
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_4_K{FLAG:1}")
;앞은 위험할지도 모르니 조심
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_5_K{FLAG:2}")
;동의
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR2_OPEN_EVENT_6_K{FLAG:1}")

@DUNGEON1_DOOR3_CLOSED_EVENT
;던전 첫 방문 시 단서없음
IF DUNGEON1_SWITCH:1
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_3_1_K{FLAG:1}")
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_3_2_K{FLAG:2}")
ELSEIF DUNGEON1_SWITCH:3
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_2_1_K{FLAG:1}")
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_2_2_K{FLAG:2}")
ELSE
    ;문이 열리지 않음
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_1_K{FLAG:1}")
    ;다른 길을 모색
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_2_K{FLAG:2}")
    ;기다려달라
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_3_K{FLAG:1}")
    ;?
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_4_K{FLAG:2}")
    ;악기 소리 언급
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_5_K{FLAG:1}")
    ;확인
    CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_CLOSED_EVENT_1_6_K{FLAG:2}")
ENDIF

@DUNGEON1_DOOR3_OPEN_EVENT
;도착함
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_OPEN_EVENT_1_K{FLAG:1}")
;앞에 누군가 있을지 의문
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_OPEN_EVENT_2_K{FLAG:2}")
;소망사항
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_OPEN_EVENT_3_K{FLAG:1}")
;잘 아는 사람일수도 잘 모르는 사람일수도
CALL KOJO_CATCH(@"KOJO_DUNGEON1_DOOR3_OPEN_EVENT_4_K{FLAG:2}")