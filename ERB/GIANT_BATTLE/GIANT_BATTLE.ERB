;전도 대미지 계산
@GET_DOWN_DAMAGE_GIGANT(DAMAGEV)
#DIM DYNAMIC DAMAGEV
#DIM DYNAMIC STABILITYV
#DIM DYNAMIC NUMV
SIF GIGANT_TUMBLE != 0
    RETURN 0
;피격 불안정 대미지 보정. 이미 대미지를 받고 있을수록 받는 양이 커진다
STABILITYV = GET_GIGANT_TOTAL_STAT(GIGANT_안정성)
NUMV = (STABILITYV / 100) * 25
SELECTCASE STABILITYV - GIGANT_DOWN_DAMAGE
    CASE NUMV * 3 + 1 TO STABILITYV
        TIMES DAMAGEV, 0.35
    CASE NUMV * 2 + 1 TO NUMV * 3
        TIMES DAMAGEV, 0.70
    CASE NUMV + 1 TO NUMV * 2
        TIMES DAMAGEV, 1.05
    CASE 1 TO NUMV
        TIMES DAMAGEV 1.15
ENDSELECT
;자세 불안정 보정
SELECTCASE GIGANT_UNSTABILITY
    CASE 0
    CASE 1
        TIMES DAMAGEV 1.25
    CASE 2
        TIMES DAMAGEV 1.50
    CASE 3
        TIMES DAMAGEV 1.75
    CASEELSE
        TIMES DAMAGEV 2.00
ENDSELECT

GIGANT_DOWN_DAMAGE += DAMAGEV
SIF GIGANT_DOWN_DAMAGE >= STABILITYV
    CALL GET_TUMBLE_GIGANT
RETURN 1

;이벤트 구상 출력과 연출 등을 할 예정이므로 자리만 만든다
@GET_TUMBLE_GIGANT
CALL SHAKE_SCREEN
GIGANT_TUMBLE = 1
RETURN 1

;그저 기능을 명확하게 해두기 위한 함수
@DOWN_DAMAGE_RECOVER
SIF !GIGANT_TUMBLE
    TIMES GIGANT_DOWN_DAMAGE, 0.9
RETURN 1